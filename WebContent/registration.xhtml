<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core">



<h:head>
	<title>Adaptive Radiology Interpretation / Education System
		(ARIES)</title>

	<!-- <meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
    -->
    
	<!-- Bootstrap -->
	<link href="./resources/css/bootstrap.min.css" rel="stylesheet" />
	<link href="./resources/css/bootstrap-theme.min.css" rel="stylesheet" />
	<link href="./css/teststyle.css" rel="stylesheet" type="text/css" />
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="./resources/js/bootstrap.min.js"></script>

</h:head>

<ui:include src="public_header.xhtml" />  
<h:body id="bodyStyle">

<h:form role="form" id="registrationForm">
<div class="container-fluid">

			<div class="row">

                <div class="col-xs-4"></div>
				<div class="col-xs-4 Absolute-Center is-Responsive">
					<div class="panel panel-primary">
						<div class="panel-heading">
                        Registration (all fields required)
   			 			</div>
						<div class="panel-body">
                            <div class="form-group">
								<label for="firstname">First Name</label>
								<div class="input-group">
									<span class="input-group-addon"><span
										class="glyphicon glyphicon-user"></span></span>
									<h:inputText id="firstname" class="form-control"
										title="Enter your first name" value="#{loginBean.firstname}"/>

								</div>
								<div id="error1" style="color: red"></div>
							</div> 
							
							<div class="form-group">
								<label for="lastname">Last Name</label>
								<div class="input-group">
									<span class="input-group-addon"><span
										class="glyphicon glyphicon-user"></span></span>
									<h:inputText id="lastname" class="form-control"
										title="Enter your first name" value="#{loginBean.lastname}"/>

								</div>
								<div id="error5" style="color: red"></div>
							</div>
							
							<div class="form-group">
								<label for="org">Organization</label>
								<div class="row">
								<div class="col-xs-3">
                                    <div class="input-group">
									<h:selectOneMenu class="registration" id="org" value="#{loginBean.organization}" onchange='this.form.submit()'>
											<f:selectItem itemValue="" itemLabel="-select-"></f:selectItem>
											<f:selectItem itemValue="CHOP" itemLabel="CHOP"></f:selectItem>
											<f:selectItem itemValue="UPHS" itemLabel="UPHS"></f:selectItem>
											<f:selectItem itemValue="Other" itemLabel="Other"></f:selectItem>
										</h:selectOneMenu>
									</div>
								</div>
								<div class="col-xs-9">
                                <div class="input-group">
                                    <span class="input-group-addon"><span
                                        class="glyphicon glyphicon-pencil"></span></span>
                                    <h:inputText id="orgCustom" class="form-control"
                                        title="Enter your organization name" value="#{loginBean.orgText}" disabled="#{loginBean.knownOrg}" />
								</div>
								</div>
								</div>
                                
								<div id="error6" style="color: red"></div>
								
							</div> 
							<div class="form-group">
								<label for="training">Training Level</label>
								<div class="input-group">
									<h:selectOneMenu class="registration" id="training" value="#{loginBean.traininglevel}" >
											<f:selectItem itemValue="" itemLabel="-select-"></f:selectItem>
											<f:selectItem itemValue="attending" itemLabel="attending"></f:selectItem>
											<f:selectItem itemValue="fellow" itemLabel="fellow"></f:selectItem>
											<f:selectItem itemValue="resident-radiology" itemLabel="resident (radiology)"></f:selectItem>
                                            <f:selectItem itemValue="resident-other" itemLabel="resident (other)"></f:selectItem>	
                                            <f:selectItem itemValue="student" itemLabel="medical student"></f:selectItem>										
											<f:selectItem itemValue="technologist" itemLabel="technologist"></f:selectItem>
										</h:selectOneMenu>

								</div>
								<div id="error7" style="color: red"></div>
							</div> 
							<div class="form-group">
								<label for="email">Email Address</label>
								<div class="input-group">
									<span class="input-group-addon"><span
										class="glyphicon glyphicon-envelope"></span></span>
									<h:inputText id="email" class="form-control"
										title="Enter Your Email Address" value="#{loginBean.email}"/>

								</div>
								<div id="error8" style="color: red"></div>
							</div>
							<div class="form-group">
								<label for="username">User Name</label>
								<div class="input-group">
									<span class="input-group-addon"><span
										class="glyphicon glyphicon-user"></span></span>
									<h:inputText id="username" class="form-control" 
										title="Enter user name" value="#{loginBean.uname}" />

								</div>
								<div id="error2" style="color: red"></div>
							</div>

							<div class="form-group">
								<label for="Password">Password</label>
								<div class="input-group">
									<span class="input-group-addon"><span
										class="glyphicon glyphicon-lock"></span></span>

									<h:inputSecret id="Password" class="form-control"
										title="Enter password" value="#{loginBean.password}" ></h:inputSecret>

								</div>
								<div id="error3" style="color: red;"></div>
							</div>
							
							<hr />


							<div class="row">

								<div class="col-xs-6" >
									<h:commandButton id="register" icon="glyphicon glyphicon-lock"
										class="btn btn-block btn-register" value="Register" onclick="return validate();"  
										action="#{loginBean.register}" />
								</div>
								<div class="col-xs-2"></div>
								<div class="col-xs-4">
									<h:commandButton icon="glyphicon glyphicon-lock"
										class="btn btn-block btn-register" value="Cancel"
										action="#{serverModel.backtoLogin}"/>
								</div>

							</div>

                       <div class="row">
                        <h:messages globalOnly="true" class="errorMsg"></h:messages>
                       </div>
					
					</div>
				</div>
						 
				</div>
				<div class="col-xs-4"></div>
			</div>

			

			
		</div> 
	</h:form>

	<script type="text/javascript">
	
	<!--showText(); -->
	 function showText()
	 {  
		
		 var organization = document.getElementById("registrationForm:org").value;
	     if(organization == 'Other')
	        document.getElementById('inputTex').style.display='block';
	     else
	        document.getElementById('inputTex').style.display='none'; 
	 }
	
	function validate(){
		var flag = 0;
 
		document.getElementById("error1").innerText="";
		document.getElementById("error2").innerText="";
		document.getElementById("error3").innerText="";
		
		document.getElementById("error1").textContent="";
		document.getElementById("error2").textContent="";
		document.getElementById("error3").textContent="";
		
		document.getElementById("error5").innerText="";
		document.getElementById("error5").textContent="";
		document.getElementById("error6").innerText="";
		document.getElementById("error6").textContent="";
		document.getElementById("error7").innerText="";
		document.getElementById("error7").textContent="";
		document.getElementById("error8").innerText="";
		document.getElementById("error8").textContent="";
		
		firstname = document.getElementById("registrationForm:firstname").value;
		lastname = document.getElementById("registrationForm:lastname").value;
		organization = document.getElementById("registrationForm:org").value;
		orgCustom = document.getElementById("registrationForm:orgCustom").value;
		training = document.getElementById("registrationForm:training").value;
		email = document.getElementById("registrationForm:email").value;
		userName = document.getElementById("registrationForm:username").value;
		passWord = document.getElementById("registrationForm:Password").value;
		
		
		if(firstname == ""){
			document.getElementById("error1").innerText = "Please Enter a FirstName";
			document.getElementById("error1").textContent = "Please Enter a FirstName";
			flag = 1;
			
		}
		if(lastname == ""){
			document.getElementById("error5").innerText = "Please Enter a LastName";
			document.getElementById("error5").textContent = "Please Enter a LastName";
			flag = 1;
			
		}
		
		if(organization.length == 0){
			document.getElementById("error6").innerText = "Please Select Organization";
			document.getElementById("error6").textContent = "Please Enter Organization";
			flag = 1;
		}
		
		if ( organization=="-select-") {
	         document.getElementById("error6").innerText = "Please Select Organization";
	         document.getElementById("error6").textContent = "Please Enter Organization";
	         flag = 1;
		}
		if ( organization=="Other") {
			if ( orgCustom=="Please supply organization name") {
	             document.getElementById("error6").innerText = "Please Select Organization";
	             document.getElementById("error6").textContent = "Please Enter Organization";
	             flag = 1;
			}
		}
		
		if(training.length == 0){
			document.getElementById("error7").innerText = "Please Select Training Level";
			document.getElementById("error7").textContent = "Please Select Training Level";
			flag = 1;
			
		}
		if(email == ""){
			document.getElementById("error8").innerText = "Please Enter Email Address";
			document.getElementById("error8").textContent = "Please Select Email Address";
			flag = 1;
			
		}else{
			flag = validateEmail();
		}
	   if(userName == ""){
			document.getElementById("error2").innerText = "Please Enter a UserName";
			document.getElementById("error2").textContent = "Please Enter a UserName";
			flag = 1;
			
		}
	   if(passWord == ""){
			document.getElementById("error3").innerText = "Please Enter Password";
			document.getElementById("error3").textContent = "Please Enter Password";
			flag = 1;
		}
		if(flag==1) return false;
		return true;
	}
	
	 function validateEmail() {

		var flag = 0;
		document.getElementById("error8").innerText =  "";
		 document.getElementById("error8").textContent= "";
		var email = document.getElementById("registrationForm:email").value;

		 var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;

	        if (!reg.test(email)) 
	        {
	            document.getElementById("error8").innerText =  "Invalid Email Address";
	            document.getElementById("error8").textContent= "Invalid Email Address";
	            flag=1;
	        }

	        return flag;

	} 
	</script>
	</h:body>
	</html>
	
	